<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Self-hosted link manager">
    <meta name="theme-color" content="#ffffff">
    <title>ctrlTAB</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icons/favicon.svg">
    <link rel="apple-touch-icon" href="icons/ctrltab-logo.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="cyberpunk.css">
    <script>
        // Apply theme before render to prevent flash
        (function() {
            var t = localStorage.getItem('ctrltab-theme');
            if (t && t !== 'light') document.documentElement.dataset.theme = t;
        })();
    </script>
</head>
<body>
    <!-- Cyberpunk grid background -->
    <div class="grid-background"></div>

    <!-- Scan lines overlay -->
    <div class="scan-lines"></div>

    <!-- Main container -->
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo" onclick="goHome()" title="Go to last collection">
                    <svg class="logo-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1500 1499.999933" preserveAspectRatio="xMidYMid meet" aria-label="ctrlTAB" role="img"><defs><g/><clipPath id="logo-clip-1"><path d="M 216 191 L 1042 191 L 1042 1281 L 216 1281 Z M 216 191 " clip-rule="nonzero"/></clipPath><clipPath id="logo-clip-2"><rect x="0" width="1042" y="0" height="1500"/></clipPath><clipPath id="logo-clip-3"><rect x="0" width="1500" y="0" height="1500"/></clipPath></defs><g transform="matrix(1, 0, 0, 1, 0, 0.000000000000112861)"><g clip-path="url(#logo-clip-3)"><g class="logo-main" fill="#231f1d" fill-opacity="1"><g transform="translate(-13.258131, 1175.522749)"><g><path d="M 403.46875 17.328125 C 334.164062 17.328125 272.695312 2.679688 219.0625 -26.609375 C 165.4375 -55.898438 123.5625 -96.328125 93.4375 -147.890625 C 63.320312 -199.460938 48.265625 -258.664062 48.265625 -325.5 C 48.265625 -392.332031 63.320312 -451.328125 93.4375 -502.484375 C 123.5625 -553.640625 165.4375 -593.863281 219.0625 -623.15625 C 272.695312 -652.445312 334.164062 -667.09375 403.46875 -667.09375 C 463.707031 -667.09375 518.375 -656.160156 567.46875 -634.296875 C 616.5625 -612.429688 657.195312 -581.488281 689.375 -541.46875 C 721.550781 -501.457031 742.59375 -454.632812 752.5 -401 L 571.796875 -401 C 556.117188 -434 533.835938 -459.78125 504.953125 -478.34375 C 476.078125 -496.914062 443.078125 -506.203125 405.953125 -506.203125 C 355.617188 -506.203125 314.363281 -489.492188 282.1875 -456.078125 C 250.007812 -422.660156 233.921875 -379.132812 233.921875 -325.5 C 233.921875 -272.695312 250.007812 -229.378906 282.1875 -195.546875 C 314.363281 -161.722656 355.617188 -144.8125 405.953125 -144.8125 C 445.554688 -144.8125 480.414062 -155.328125 510.53125 -176.359375 C 540.644531 -197.398438 562.304688 -225.660156 575.515625 -261.140625 L 758.6875 -261.140625 C 747.132812 -204.210938 725.0625 -154.914062 692.46875 -113.25 C 659.875 -71.582031 618.820312 -39.398438 569.3125 -16.703125 C 519.8125 5.984375 464.53125 17.328125 403.46875 17.328125 Z M 403.46875 17.328125 "/></g></g></g><g fill="#231f1d" fill-opacity="1"><g transform="translate(668.708078, 1175.522749)"><g/></g></g><g transform="matrix(1, 0, 0, 1, 458, 0.000000000000112861)"><g clip-path="url(#logo-clip-2)"><g clip-path="url(#logo-clip-1)"><g class="logo-accent" fill="#e2003d" fill-opacity="1"><g transform="translate(519.708714, 1294.476756)"><g><path d="M 287.3125 -121.359375 L 21.9375 -749.5625 L -231.171875 -642.65625 L -302.921875 -812.515625 L 384.5625 -1102.921875 L 456.3125 -933.0625 L 203.203125 -826.140625 L 468.578125 -197.9375 Z M 287.3125 -121.359375 "/></g></g></g></g></g></g></g></g></svg>
                </div>
                <div class="subtitle">Link Manager</div>
            </div>

            <div class="collections-container">
                <div class="collections-header">
                    <span class="label">Collections</span>
                    <button class="btn-icon" id="addCollectionBtn" title="Add collection">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
                <ul class="collections-list" id="collectionsList">
                    <!-- Collections will be loaded here -->
                </ul>
            </div>

            <div class="sidebar-footer">
                <button class="settings-btn" id="settingsBtn">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M13.05 10.13a1.14 1.14 0 0 0 .23 1.26l.04.04a1.38 1.38 0 1 1-1.96 1.96l-.04-.04a1.14 1.14 0 0 0-1.26-.23 1.14 1.14 0 0 0-.69 1.05v.11a1.38 1.38 0 1 1-2.76 0v-.06a1.14 1.14 0 0 0-.75-1.05 1.14 1.14 0 0 0-1.26.23l-.04.04a1.38 1.38 0 1 1-1.96-1.96l.04-.04a1.14 1.14 0 0 0 .23-1.26 1.14 1.14 0 0 0-1.05-.69h-.11a1.38 1.38 0 1 1 0-2.76h.06a1.14 1.14 0 0 0 1.05-.75 1.14 1.14 0 0 0-.23-1.26l-.04-.04a1.38 1.38 0 1 1 1.96-1.96l.04.04a1.14 1.14 0 0 0 1.26.23h.06a1.14 1.14 0 0 0 .69-1.05v-.11a1.38 1.38 0 1 1 2.76 0v.06a1.14 1.14 0 0 0 .69 1.05 1.14 1.14 0 0 0 1.26-.23l.04-.04a1.38 1.38 0 1 1 1.96 1.96l-.04.04a1.14 1.14 0 0 0-.23 1.26v.06a1.14 1.14 0 0 0 1.05.69h.11a1.38 1.38 0 1 1 0 2.76h-.06a1.14 1.14 0 0 0-1.05.69Z" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    Settings
                </button>
            </div>
        </aside>

        <!-- Main content -->
        <main class="main-content">
            <div class="content-header">
                <div class="collection-title-container">
                    <button class="btn-icon settings-back-btn" id="settingsBackBtn" style="display: none;" title="Back">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M10 3L5 8l5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <h2 class="collection-title" id="collectionTitle">ctrlTAB</h2>
                    <div class="collection-actions">
                        <button class="btn-icon" id="editCollectionBtn" title="Edit collection" style="display: none;">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M11.333 2A1.886 1.886 0 0 1 14 4.667l-9 9-3.667 1 1-3.667 9-9Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <button class="btn-primary" id="addSectionBtn" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Add Section
                </button>
            </div>

            <div class="sections-container" id="sectionsContainer">
                <div class="empty-state">
                    <div class="empty-icon">âŒ˜</div>
                    <p>Create your first collection</p>
                    <button class="btn-primary" onclick="showAddCollectionModal()" style="margin-top: var(--spacing-lg);">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        New Collection
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-backdrop" id="modalBackdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Modal Title</h3>
                <button class="btn-icon" id="modalClose">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>
